<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>One Simple Trick for JavaScript Performance Optimization | concise notes</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<meta name="description" content="My attempt at clickbait. Also, an interesting (who said &quot;useless&quot;) JS performance tip.">
<meta property="og:type" content="article">
<meta property="og:title" content="One Simple Trick for JavaScript Performance Optimization">
<meta property="og:url" content="https://vhf.github.io/blog/2016/01/15/one-simple-trick-for-javascript-performance-optimization/index.html">
<meta property="og:site_name" content="concise notes">
<meta property="og:description" content="My attempt at clickbait. Also, an interesting (who said &quot;useless&quot;) JS performance tip.">
<meta property="og:updated_time" content="2016-01-24T23:53:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="One Simple Trick for JavaScript Performance Optimization">
<meta name="twitter:description" content="My attempt at clickbait. Also, an interesting (who said &quot;useless&quot;) JS performance tip.">
<meta name="twitter:creator" content="@_vhf">
<link rel="alternate" href="/blog/atom.xml" title="concise notes" type="application/atom+xml">
<link rel="shortcut icon" href="/favicons/favicon.ico">
<link rel="icon" sizes="16x16 32x32 64x64" href="/favicons/favicon.ico">
<link rel="icon" type="image/png" sizes="196x196" href="/favicons/favicon-192.png">
<link rel="icon" type="image/png" sizes="160x160" href="/favicons/favicon-160.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96.png">
<link rel="icon" type="image/png" sizes="64x64" href="/favicons/favicon-64.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16.png">
<link rel="apple-touch-icon" href="/favicons/favicon-57.png">
<link rel="apple-touch-icon" sizes="114x114" href="/favicons/favicon-114.png">
<link rel="apple-touch-icon" sizes="72x72" href="/favicons/favicon-72.png">
<link rel="apple-touch-icon" sizes="144x144" href="/favicons/favicon-144.png">
<link rel="apple-touch-icon" sizes="60x60" href="/favicons/favicon-60.png">
<link rel="apple-touch-icon" sizes="120x120" href="/favicons/favicon-120.png">
<link rel="apple-touch-icon" sizes="76x76" href="/favicons/favicon-76.png">
<link rel="apple-touch-icon" sizes="152x152" href="/favicons/favicon-152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicons/favicon-180.png">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="/favicons/favicon-144.png">
<meta name="msapplication-config" content="/favicons/browserconfig.xml">
<link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/blog/css/style.css" type="text/css">
<script type="text/javascript">!function(e,a,n,t,c,i,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,i=a.createElement(n),o=a.getElementsByTagName(n)[0],i.async=1,i.src=t,o.parentNode.insertBefore(i,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-69443473-1","auto"),ga("require","linkid"),ga("send","pageview");</script></head><body>
<div class="container">
<div class="page-wrap">
<header class="page-header" role="banner" itemscope="itemscope" itemtype="http://schema.org/WPHeader">
<nav itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
<div class="nav-wrapper">
<h1 class="brand-logo" itemprop="headline"><a href="/blog/" rel="home">concise notes</a></h1>
<meta itemprop="description" content="Victor Felder's blog">
<a href="#" id="mobile-menu" class="hide-on-med-and-up menu-icon"></a>
<nav role="navigation" itemscope="itemscope" itemtype="http://schema.org/SiteNavigationElement">
<ul class="right hide-on-med-and-down">
<li><a class="main-nav-link" href="/blog/">Home</a></li>
<li><a class="main-nav-link" href="/blog/archives">Archives</a></li>
<li><a class="main-nav-link" href="https://vhf.github.io">About</a></li>
<li><a class="rss-icon" href="/blog/atom.xml" title="RSS Feed"></a></li>
</ul>
</nav>
<nav class="side-nav">
<ul id="nav-mobile">
<li><a class="main-nav-link" href="/blog/">Home</a></li>
<li><a class="main-nav-link" href="/blog/archives">Archives</a></li>
<li><a class="main-nav-link" href="https://vhf.github.io">About</a></li>
<li><a id="mobile-menu-close" class="main-nav-link" href="#">Close the menu</a></li>
</ul>
</nav>
</div>
</nav>
</header>
<div class="pattern"></div>
<main class="page-main" role="main" tabindex="-1">
<article id="post-one-simple-trick-for-javascript-performance-optimization" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
<link itemprop="mainEntityOfPage" href="/blog/2016/01/15/one-simple-trick-for-javascript-performance-optimization/">
<nav>
<div class="nav-wrapper">
<div class="col s12">
<a href="/blog/2016/01/15/one-simple-trick-for-javascript-performance-optimization/" class="breadcrumb">
<time datetime="2016-01-15T00:20:12.000Z" itemprop="datePublished">2016-01-15</time>
<time class="hide" datetime="2016-01-15T00:20:12.000Z" itemprop="dateModified">2016-01-15</time>
</a>
<a class="hide-on-med-and-down breadcrumb breadcrumb-link" href="/blog/categories/programming/">programming</a><a class="hide-on-med-and-down breadcrumb breadcrumb-link" href="/blog/categories/programming/JavaScript/">JavaScript</a>
<span class="hide" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
<span itemprop="name">
<a class="breadcrumb" href="https://plus.google.com/102455247906663845886" itemprop="url" rel="author">victor felder</a>
</span>
</span>
<div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
<meta itemprop="name" content="concise notes">
</div>
</div>
</div>
</nav>
<div class="article-inner">
<header class="article-header">
<h1 class="article-title" itemprop="headline">
One Simple Trick for JavaScript Performance Optimization
</h1>
</header>
<div class="article-entry" itemprop="articleBody">
<p>Sorry for the clickbait. It’s so omnipresent these days, I <em>had</em> to try it. 90% of my daily Medium digest and 90% of my Pocket recommendations are like this. Note to self: write some kind of clickbait filtering software. Obtaining a huge training set should <strong>not</strong> be an issue. (We could even crowdsource these! How fun!)</p>
<p>Anyway. If you follow my blog (and I’m not sure you should), you might have guessed that I’m currently having fun with V8’s optimizing compiler, an awesome piece of software romantically called Crankshaft. Basically, it’s what makes JavaScript fast on Chrome/nodejs.</p>
<p>Most of the time Crankshaft is able to optimize JavaScript functions. They then run really fast.</p>
<p>In some cases, Crankshaft doesn’t optimize a function. It simply gets to a function and bails out instead of trying to optimize it. Whenever this happens, it invokes a <strong>bailout reason</strong>.</p>
<p>Documentation on these bailout reasons are very scarce, so Wednesday I decided to list them all and try to reproduce each of them, documenting why it occurs, giving advice on how to avoid the bailout, and give real-life examples of where it can be spotted.</p>
<p>As of the writing of this post, I was only able to partially document 8 of them. I have more material but need more research/more time.</p>
<p>If you’d like to see what I got and to contribute your awesome V8 knowledge, please see <strong><a href="https://github.com/vhf/v8-bailout-reasons" target="_blank" rel="external">V8 bailout reasons</a></strong> on GitHub.</p>
<p>But I didn’t make you read all this for nothing. In the title of this post I made a promise I intend to fulfill, so here is…</p>
<h3 id="One_Simple_Trick_for_JavaScript_Performance_Optimization"><a href="#One_Simple_Trick_for_JavaScript_Performance_Optimization" class="headerlink" title="One Simple Trick for JavaScript Performance Optimization"></a>One Simple Trick for JavaScript Performance Optimization</h3><p>Don’t use more than <del>65535</del> 512 parameters in a single JavaScript function. Otherwise, Crankshaft will bail out with the following informative message: “Too many parameters.”</p>
<h4 id="How_can_I_fix_my_JavaScript_code_to_make_it_run_blazingly_fast_3F"><a href="#How_can_I_fix_my_JavaScript_code_to_make_it_run_blazingly_fast_3F" class="headerlink" title="How can I fix my JavaScript code to make it run blazingly fast?"></a>How can I fix my JavaScript code to make it run blazingly fast?</h4><p>Stick to 511 parameters (or less).</p>
<ul>
<li>511 is a good-looking number. In unicode, it looks really really good: &#511;</li>
<li>A function with 511 parameters always looks better than a function with 512 parameters. (I have discovered a truly remarkable proof which this margin is too small to contain.)</li>
</ul>
<p><em>Note: I originally wrote this article with 65535 instead of 512. I did not pay enough attention while reading V8 source code. It was 65535 bits, i.e. 512 bytes, or 512 parameters. Not 65535 parameters. <a href="https://github.com/vhf/concise-notes/commit/88fc535cbe23a567ddd3e65f8f64c6590936a51b" target="_blank" rel="external">Review the diff</a>.</em></p>
</div>
<footer class="article-footer">
<div class="row">
<div class="col s6">
<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/crankshaft/">crankshaft</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/nodejs/">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/v8/">v8</a></li></ul>
&nbsp;
</div>
<div class="col s6 right-align">
<div class="article-footer-right">
<a data-url="https://vhf.github.io/blog/2016/01/15/one-simple-trick-for-javascript-performance-optimization/" data-id="cijsdlt2i000rg4abc0sg3uto" class="article-share-link">share</a> or <a href="https://github.com/vhf/concise-notes/edit/master/source/_posts/2016-01-15-one-simple-trick-for-javascript-performance-optimization.md" class="article-suggest-modification">suggest a modification</a>
</div>
</div>
</div>
</footer>
</div>
<div class="row post-navigation">
<div class="col s12 m6 push-m6">
<div class="post-nav">
<div class="post-nav-title blue-grey darken-1 right center-align">
<span class="white-text">Newer</span>
</div>
<div class="post-nav-content clear right-align">
<a href="/blog/2016/01/20/modifying-or-deleting-a-line-from-an-old-commit/">
Modifying or Deleting a Line from an Old Commit
</a>
</div>
</div>
</div>
<div class="col s12 m6 pull-m6">
<div class="post-nav">
<div class="post-nav-title blue-grey darken-1 left center-align">
<span class="white-text">Older</span>
</div>
<div class="post-nav-content clear">
<a href="/blog/2016/01/13/comment-syntax-in-programming-languages/">
Comment Syntax in Programming Languages (and the Eye of Osiris)
</a>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="page-footer blue-grey darken-3">
<div class="row">
<div class="col l3 s12">
<h5 class="white-text">Categories</h5>
<p class="grey-text text-lighten-4">
<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/programming/">programming</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/programming/JavaScript/">JavaScript</a><span class="category-list-count">7</span></li></ul></li></ul>
</p>
</div>
<div class="col l3 s12">
<h5 class="white-text">Tags</h5>
<p class="grey-text text-lighten-4">
<ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/babel/">babel</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/crankshaft/">crankshaft</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/es2015/">es2015</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/javascript/">javascript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/nodejs/">nodejs</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/programming-language-design/">programming language design</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/promises/">promises</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/v8/">v8</a><span class="tag-list-count">5</span></li></ul>
</p>
</div>
<div class="col l3 s12">
<h5 class="white-text">Archives</h5>
<p class="grey-text text-lighten-4">
<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/01/">January 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/12/">December 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/11/">November 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/10/">October 2015</a><span class="archive-list-count">2</span></li></ul>
</p>
</div>
<div class="col l3 s12">
<h5 class="white-text">Recent posts</h5>
<p class="grey-text text-lighten-4">
<ul>
<li>
<a href="/blog/2016/01/22/chromium-chrome-v8-crankshaft-bailout-reasons/">Chromium, Chrome, Node.js, V8, Crankshaft and bailout reasons</a>
</li>
<li>
<a href="/blog/2016/01/21/Chrome-49-is-coming-with-92-ES2015-coverage/">Chrome 49 is coming, with 92% ES2015 coverage!</a>
</li>
<li>
<a href="/blog/2016/01/20/modifying-or-deleting-a-line-from-an-old-commit/">Modifying or Deleting a Line from an Old Commit</a>
</li>
<li>
<a href="/blog/2016/01/15/one-simple-trick-for-javascript-performance-optimization/">One Simple Trick for JavaScript Performance Optimization</a>
</li>
<li>
<a href="/blog/2016/01/13/comment-syntax-in-programming-languages/">Comment Syntax in Programming Languages (and the Eye of Osiris)</a>
</li>
</ul>
</p>
</div>
</div>
<div class="footer-copyright blue-grey darken-3">
all content &amp; design &copy; copyright 2016 victor felder<br>
</div>
</footer>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script><script src="/blog/js/script.js" type="text/javascript"></script></div></body></html>